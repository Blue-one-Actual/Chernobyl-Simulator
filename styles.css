:root{
	--bg:#0c1a14; /* deep hospital green */
	--panel:#111912; /* panel dark */
	--accent-amber:#d6a400; /* old display amber */
	--accent-green:#8fe08f; /* sick green */
	--muted:#9aa08a;
	--bevel-light:rgba(255,255,255,0.06);
	--bevel-dark:rgba(0,0,0,0.6);
	--radius:2px;
}

*{box-sizing:border-box;font-family:'Courier New', 'JetBrains Mono', monospace}
body{margin:0;background:linear-gradient(180deg,var(--bg) 0%, #071613 70%);color:var(--muted);position:relative;overflow-x:hidden}

/* subtle grain texture */
/* grain overlay temporarily disabled to avoid intercepting clicks during layout tweaks */
body::after{ display:none }

/* ensure UI sits above subtle overlay so clicks work reliably */
.container{position:relative;z-index:10}
.header{padding:12px 18px;background:var(--panel);border-bottom:2px solid rgba(0,0,0,0.6);pointer-events:auto}
.header h1{margin:0;font-size:18px;letter-spacing:1px;color:var(--accent-amber);text-shadow:0 0 6px rgba(214,164,0,0.08)}
.container{display:flex;gap:14px;padding:14px;pointer-events:auto}
.left{flex:1;pointer-events:auto}
.side-menu{width:200px;background:linear-gradient(180deg,var(--panel),#0c130f);padding:12px;border-radius:var(--radius);border:1px solid rgba(0,0,0,0.6);align-self:flex-start;pointer-events:auto}
.side-menu ul{list-style:none;padding:6px;margin:0;pointer-events:auto}
.side-menu li{padding:10px 12px;margin:6px 0;border-radius:var(--radius);color:var(--muted);cursor:pointer;background:linear-gradient(180deg,#081412,#06120f);border:1px solid rgba(255,255,255,0.02);font-size:13px;pointer-events:auto}
.side-menu li.active{background:linear-gradient(90deg,var(--accent-amber),#b26a00);color:#071212;font-weight:700;box-shadow:inset 0 1px var(--bevel-light), inset 0 -1px var(--bevel-dark)}
.side-menu li:hover{filter:brightness(1.05)}
.right{width:360px;background:linear-gradient(180deg,#0b1612,#07120f);padding:16px;border-radius:var(--radius);border:1px solid rgba(0,0,0,0.6);pointer-events:auto;position:relative;z-index:15}
.right-panel{display:block;pointer-events:auto}
.right-panel[hidden]{display:none;pointer-events:none}

.right-panel h2{margin-top:0;color:#ffd54f}
.core-card{background:linear-gradient(180deg,#0b1411,#09110e);padding:12px;border-radius:var(--radius);border:1px solid rgba(0,0,0,0.6);box-shadow:inset 0 1px var(--bevel-light), 0 6px 18px rgba(0,0,0,0.6)}
.svg{display:block;width:100%}
#core-glow{transition:opacity 0.2s, fill 0.2s}
.core-visual{display:grid;grid-template-columns:1fr;gap:8px}
.card-header{position:relative;padding-bottom:6px;margin-bottom:6px}
.card-header h2{margin:0;font-size:16px;color:var(--accent-amber)}
.card-header .serial{font-size:11px;color:var(--muted);margin-top:4px}
.hazard-stripe{position:absolute;right:0;top:0;bottom:0;width:56px;background:linear-gradient(90deg,var(--accent-amber),#b26a00);opacity:0.9;border-left:2px solid rgba(0,0,0,0.6)}
.indicators{display:flex;gap:12px;justify-content:space-between;margin-top:8px}
.indicators div{background:linear-gradient(180deg,#081014,#051014);padding:10px;border-radius:6px;border:1px solid #1f2a2b;width:32%;text-align:center;color:#cfeaff}
label{display:block;margin-top:12px;pointer-events:auto}
input[type=range]{width:100%;pointer-events:auto}
.buttons{display:flex;gap:8px;margin-top:8px;pointer-events:auto}
.button, button{flex:1;padding:10px;border-radius:var(--radius);border:1px solid rgba(0,0,0,0.6);background:linear-gradient(180deg,#121915,#09110d);color:var(--muted);cursor:pointer;box-shadow:inset 0 2px var(--bevel-light), inset 0 -2px var(--bevel-dark);pointer-events:auto}
.button.danger, button.danger{background:linear-gradient(180deg,#5b0b0b,#3f0707);color:#fff;border-color:#2a0505}
.log{margin-top:12px}
.log-box{height:160px;overflow:auto;background:linear-gradient(180deg,#071212,#04110f);padding:8px;border-radius:var(--radius);border:1px solid rgba(0,0,0,0.6);font-size:13px;color:var(--accent-green)}
footer{padding:8px 16px;font-size:12px;color:#9aa6b2}

/* Gauge styles */
.gauge{width:240px;height:160px;margin:0 auto}
#power-gauge path{stroke:#2a2a2a}
#power-needle{transition:transform 0.25s ease-out}

/* Right panel details */
.right h2{margin-top:0;color:#ffd54f}

/* Mosaic cores */
#reactor-mosaic{width:100%;height:320px;background:radial-gradient(circle at 50% 40%, rgba(255,200,80,0.03), transparent 30%);} 
.mosaic-core{stroke:#111;stroke-width:0.6;cursor:pointer;transform-origin:center center}
.mosaic-core:hover{filter:brightness(1.25);transform:scale(1.06);transition:transform 0.12s}

/* Alarm banner */
.alarm-banner{display:flex;align-items:center;justify-content:center;padding:8px;margin-top:8px;border-radius:6px;background:linear-gradient(90deg,#3a0b0b,#6b0f0f);color:#fff;font-weight:800;box-shadow:0 6px 18px rgba(107,15,15,0.25);border:2px solid rgba(255,180,180,0.12)}
.alarm-banner span{letter-spacing:1px}
.alarm-banner.active{animation:alarm-flash 0.8s linear infinite}

@keyframes alarm-flash{
	0%{filter:brightness(1)}
	25%{filter:brightness(1.3)}
	50%{filter:brightness(0.9)}
	75%{filter:brightness(1.25)}
	100%{filter:brightness(1)}
}

.security-controls{display:flex;gap:8px;margin-top:8px}
.security-controls button{flex:1;padding:8px;border-radius:6px;border:1px solid #2b2b2b;background:#162022;color:#dff1ff}
.security-controls button.danger{background:#7a1010;color:#fff;border-color:#4a0a0a}

.vol-label{display:flex;align-items:center;gap:8px;margin-left:8px;color:#cfeaff;font-size:13px}
.vol-label input[type=range]{width:110px}

/* Phone UI */
.phone{margin-top:12px;background:linear-gradient(180deg,#071018,#041014);padding:10px;border-radius:8px;border:1px solid #122229;display:flex;gap:8px;align-items:center}
.phone-display{flex:1;padding:8px;border-radius:6px;background:#06121a;color:#cfeaff;text-align:center;border:1px solid #122229}
.phone-buttons{display:flex;gap:6px}
.phone-buttons button{padding:8px 10px;border-radius:6px;background:#0f1720;color:#dff1ff;border:1px solid #223033;cursor:pointer}
.phone-buttons button.danger{background:#7a1010}

/* Slips (stampable documents) in Security */
.slips{margin-top:14px}
.slips h3{margin:6px 0;color:#ffd54f}
.slip{background:linear-gradient(180deg,#0b1416,#061014);border:1px solid #1f2a2b;padding:10px;border-radius:6px;margin-bottom:10px;position:relative;overflow:hidden}
.slip-body{color:#cfeaff;font-size:13px;line-height:1.2;margin-bottom:8px}
.slip-actions{display:flex;gap:8px}
.slip-actions button{padding:6px 10px;border-radius:4px;border:1px solid #233238;background:#0f1720;color:#dff1ff;cursor:pointer}
.btn-approve{background:linear-gradient(180deg,#163a17,#0f2a0f);border-color:#2f8a2f}
.btn-deny{background:linear-gradient(180deg,#3a1a1a,#2a0f0f);border-color:#8a2f2f}

.stamp{position:absolute;right:12px;top:12px;width:120px;height:60px;display:flex;align-items:center;justify-content:center;font-family:monospace;font-weight:800;color:transparent;transform:rotate(-18deg);pointer-events:none;opacity:0;transition:opacity 220ms ease}
.stamp.approved{color:#0b3; border:3px solid rgba(11,51,11,0.25); background:rgba(11,51,11,0.06);box-shadow:0 6px 14px rgba(11,51,11,0.08);opacity:1}
.stamp.denied{color:#f33; border:3px solid rgba(153,11,11,0.18); background:rgba(153,11,11,0.04);box-shadow:0 6px 14px rgba(153,11,11,0.06);opacity:1}

.slip.approved{border-color:#224422}
.slip.denied{border-color:#442222}

/* Drag-and-drop boards */
.slip-board-wrap{display:flex;gap:12px;margin-top:8px}
.slip-source,.slip-target{flex:1;min-height:160px;padding:8px;border-radius:6px;border:1px dashed rgba(255,255,255,0.03);background:linear-gradient(180deg,#061014,#041010)}
.source-title,.target-title{font-size:12px;color:#cfeaff;margin-bottom:8px}
.slip{cursor:grab}
.slip.dragging{opacity:0.6;transform:scale(0.99)}
.slip-target.highlight{outline:3px dashed rgba(255,213,79,0.18);box-shadow:inset 0 0 40px rgba(255,140,0,0.02)}
.slip-source .slip{margin-bottom:8px}
.slip-target .slip{margin-bottom:8px}

/* Table center where new slips are initially placed */
.table-center{position:relative;width:100%;height:360px;border-radius:8px;padding:12px;background:linear-gradient(180deg,#071216,#031013);border:1px solid rgba(255,255,255,0.03);overflow:hidden;margin-top:12px;pointer-events:auto;z-index:5}
.table-center .note{position:absolute;left:8px;top:8px;color:#9fb8c4;font-size:12px;pointer-events:none}
.table-center .slip{position:absolute;width:170px;padding:8px;border-radius:6px;margin:0;box-shadow:0 6px 18px rgba(0,0,0,0.6);cursor:grab;transform-origin:center left;pointer-events:auto}
.table-center .slip .slip-actions{display:none;position:static;margin-top:8px;pointer-events:auto}


/* Views */
.view{display:none;pointer-events:auto}
.view.active{display:block;pointer-events:auto}

.security-panel ul{margin:8px 0 0 18px}
.security-panel button{margin-top:8px}

.turbine-panel p{font-weight:700}
.turbine-panel button{margin-right:8px}

/* Annunciator */
.annunciator{padding:6px 18px;background:linear-gradient(90deg,#07120f,#09140f);border-bottom:2px solid rgba(0,0,0,0.6)}
.annunciator-row{display:flex;gap:8px}
.annunciator .lamp{width:72px;height:36px;background:#0b1510;border-radius:var(--radius);display:flex;align-items:center;justify-content:center;color:var(--muted);border:1px solid rgba(0,0,0,0.6);box-shadow:inset 0 1px var(--bevel-light)}
.annunciator .lamp.active{background:linear-gradient(90deg,var(--accent-amber),#b26a00);color:#071212;box-shadow:inset 0 1px var(--bevel-light),0 6px 12px rgba(0,0,0,0.6)}
.annunciator .lamp.blink{animation:blink 0.8s steps(1) infinite}
@keyframes blink{50%{opacity:0.2}}

/* AZ-5 button */

/* Stab-Visual */
.rod-panel{margin-top:12px}
.rod-visual{display:flex;align-items:center;gap:12px}
.rod-tube{width:48px;height:140px;background:linear-gradient(180deg,#0b1410,#07110d);border:2px solid rgba(0,0,0,0.6);border-radius:var(--radius);padding:6px;position:relative;overflow:hidden;box-shadow:inset 0 2px var(--bevel-light), inset 0 -2px var(--bevel-dark)}
.rod-fill{position:absolute;left:6px;right:6px;bottom:6px;background:linear-gradient(180deg,#1b1b1b,#0e0e0e);border-radius:2px;box-shadow:inset 0 6px 10px rgba(0,0,0,0.6);transition:height 200ms ease}

/* Gro√üe AZ-5 mit viereckiger Hazard-Umrandung und runder Taste */
.az5-big-area{position:relative;margin:12px auto 8px;width:160px;height:160px;display:flex;align-items:center;justify-content:center}
.hazard-square{position:absolute;inset:-12px;border-radius:50%;background:transparent;transform:none;opacity:1;border:8px solid transparent;box-shadow:0 10px 30px rgba(0,0,0,0.6);pointer-events:none;border-image:repeating-linear-gradient(90deg,#ffed4d 0 12px,#222 12px 24px) 1 round}
.az5-big-button{position:relative;z-index:30;width:110px;height:110px;border-radius:50%;border:4px solid #5b0b0b;background:#9a0f0f;color:#fff;font-weight:800;font-size:16px;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,0.5)}
.az5-big-button:active{transform:translateY(2px)}
.az5-cover-large{position:absolute;z-index:70;width:128px;height:128px;border-radius:50%;left:50%;top:14px;transform:translateX(-50%);background:rgba(255,255,255,0.06);backdrop-filter:blur(0.6px);-webkit-backdrop-filter:blur(0.6px);border:2px solid rgba(255,255,255,0.06);pointer-events:none;transition:transform 260ms cubic-bezier(.2,.9,.3,1), opacity 160ms}
.az5-cover-large.open{transform:translateX(-50%) translateY(-140px);opacity:1;pointer-events:auto}

/* legacy small AZ5 (kept minimal) */
.az5{display:inline-block;position:relative;margin-top:10px}
.az5 .cover{display:none}

/* Selsyn knobs */
.selsyn-controls{display:flex;gap:12px;margin-top:10px}
.knob-group{flex:1}
.knob-group label{display:block;margin-bottom:6px;color:#cfeaff}
.knob-group input[type=range]{width:100%}

/* Analog needles */
.analog{width:100%;height:80px}
#analog-needles line{transition:transform 0.18s ease-out}

/* DOSIMETER (Soviet 80s style) */
.dosimeter{background:linear-gradient(180deg,#121815,#0b130f);border:2px solid rgba(0,0,0,0.6);border-radius:var(--radius);padding:12px;margin-bottom:12px;font-family:'Courier New',monospace;color:var(--accent-green);box-shadow:inset 0 1px var(--bevel-light)}
.dosimeter-header{font-size:0.85em;font-weight:700;text-align:center;margin-bottom:8px;letter-spacing:1px}
.dosimeter-readout{font-size:1.8em;font-weight:800;text-align:center;margin-bottom:8px;text-shadow:0 0 8px rgba(74,222,128,0.5)}
.dosimeter-bar{width:100%;height:16px;background:#0d0d0d;border:1px solid #4ade80;border-radius:3px;overflow:hidden;position:relative}
.dosimeter-fill{height:100%;background:linear-gradient(90deg, #4ade80 0%, #fbbf24 50%, #ff6b35 100%);width:20%;transition:width 0.3s ease;box-shadow:0 0 8px rgba(74,222,128,0.4)}
.dosimeter-labels{display:flex;justify-content:space-between;font-size:0.75em;margin-top:6px;color:#a0a0a0}

/* RESET Button (bottom-left) */
.reset-section{position:fixed;bottom:20px;left:20px;z-index:100}
.reset-btn{background:linear-gradient(180deg, #3a3a3a, #1a1a1a);border:2px solid #ff6b35;color:#ff6b35;padding:10px 16px;border-radius:6px;font-family:monospace;font-weight:700;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,0.4);transition:all 0.2s}
.reset-btn:hover{background:linear-gradient(180deg, #4a4a4a, #2a2a2a);box-shadow:0 6px 16px rgba(255,107,53,0.2)}
.reset-btn:active{transform:scale(0.95)}

/* Responsive */
@media (max-width:900px){.container{flex-direction:column}.right{width:100%}}